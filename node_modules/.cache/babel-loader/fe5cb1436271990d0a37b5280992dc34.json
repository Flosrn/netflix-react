{"ast":null,"code":"import _classCallCheck from \"/Users/flo/Documents/Code/React/netflix-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/flo/Documents/Code/React/netflix-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/flo/Documents/Code/React/netflix-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/flo/Documents/Code/React/netflix-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/flo/Documents/Code/React/netflix-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/flo/Documents/Code/React/netflix-react/src/containers/App.js\";\nimport React, { Component } from 'react';\nimport SearchBar from '../components/search-bar';\nimport VideoList from './video-list';\nimport Video from '../components/video';\nimport Navbar from '../components/navbar';\nimport axios from 'axios';\nvar API_END_POINT = \"https://api.themoviedb.org/3/\";\nvar POPULAR_MOVIES_URL = \"discover/movie?language=fr&sort_by=popularity.desc&include_adult=false&append_to_response=images\";\nvar API_KEY = \"api_key=648b446f533986cb187056a8f06bc218\";\nvar SEARCH_URL = \"search/movie?language=fr&include_adult=false\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.state = {\n      movieList: {},\n      currentMovie: {}\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.initMovies();\n    }\n  }, {\n    key: \"initMovies\",\n    value: function initMovies() {\n      axios.get(\"\".concat(API_END_POINT).concat(POPULAR_MOVIES_URL, \"&\").concat(API_KEY)).then(function (response) {\n        this.setState({\n          movieList: response.data.results.slice(1, 6),\n          currentMovie: response.data.results[0]\n        }, function () {\n          this.applyVideoToCurrentMovie();\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"applyVideoToCurrentMovie\",\n    value: function applyVideoToCurrentMovie() {\n      axios.get(\"\".concat(API_END_POINT, \"movie/\").concat(this.state.currentMovie.id, \"?\").concat(API_KEY, \"&append_to_response=videos\")).then(function (response) {\n        var youtubeKey = response.data.videos.results[0];\n        var newCurrentMovieState = this.state.currentMovie;\n        newCurrentMovieState.videoId = youtubeKey;\n        this.setState({\n          currentMovie: newCurrentMovieState\n        });\n        console.log(this.state.currentMovie);\n      }.bind(this));\n    }\n  }, {\n    key: \"changeVideoHandler\",\n    value: function changeVideoHandler(movie) {\n      this.setState({\n        currentMovie: movie\n      }, function () {\n        this.applyVideoToCurrentMovie();\n        this.setRecommendation();\n      });\n    }\n  }, {\n    key: \"searchVideoHandler\",\n    value: function searchVideoHandler(searchText) {\n      if (searchText) {\n        axios.get(\"\".concat(API_END_POINT).concat(SEARCH_URL, \"&\").concat(API_KEY, \"&query=\").concat(searchText)).then(function (response) {\n          var _this2 = this;\n\n          if (response.data && response.data.results[0]) {\n            if (response.data.results[0].id !== this.state.currentMovie.id) {\n              this.setState({\n                currentMovie: response.data.results[0]\n              }, function () {\n                _this2.applyVideoToCurrentMovie();\n\n                _this2.setRecommendation();\n              });\n            }\n          }\n        }.bind(this));\n      }\n    }\n  }, {\n    key: \"setRecommendation\",\n    value: function setRecommendation() {\n      axios.get(\"\".concat(API_END_POINT, \"movie/\").concat(this.state.currentMovie.id, \"/recommendations?\").concat(API_KEY, \"&language=fr\")).then(function (response) {\n        this.setState({\n          movieList: response.data.results.slice(0, 5)\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var renderVideoList = function renderVideoList() {\n        if (_this3.state.movieList.length >= 5) {\n          return React.createElement(VideoList, {\n            movieList: _this3.state.movieList,\n            changedVideo: _this3.changeVideoHandler.bind(_this3),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            },\n            __self: this\n          });\n        }\n      };\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"NETFLIX REACT\"), React.createElement(\"div\", {\n        className: \"search_bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        searchedVideo: this.searchVideoHandler.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Video, {\n        videoId: this.state.currentMovie.videoId,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(Navbar, {\n        currentMovie: this.state.currentMovie,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-md-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, renderVideoList())));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/flo/Documents/Code/React/netflix-react/src/containers/App.js"],"names":["React","Component","SearchBar","VideoList","Video","Navbar","axios","API_END_POINT","POPULAR_MOVIES_URL","API_KEY","SEARCH_URL","App","props","state","movieList","currentMovie","initMovies","get","then","response","setState","data","results","slice","applyVideoToCurrentMovie","bind","id","youtubeKey","videos","newCurrentMovieState","videoId","console","log","movie","setRecommendation","searchText","renderVideoList","length","changeVideoHandler","searchVideoHandler"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport SearchBar from '../components/search-bar';\nimport VideoList from './video-list';\n\nimport Video from '../components/video';\nimport Navbar from '../components/navbar';\nimport axios from 'axios';\n\nconst API_END_POINT = \"https://api.themoviedb.org/3/\";\nconst POPULAR_MOVIES_URL = \"discover/movie?language=fr&sort_by=popularity.desc&include_adult=false&append_to_response=images\";\nconst API_KEY = \"api_key=648b446f533986cb187056a8f06bc218\";\n\nconst SEARCH_URL = \"search/movie?language=fr&include_adult=false\";\n\n\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      movieList: {},\n      currentMovie: {},\n    }\n  }\n\n  componentWillMount() {\n    this.initMovies();\n  }\n\n\n  initMovies() {\n    axios.get(`${API_END_POINT}${POPULAR_MOVIES_URL}&${API_KEY}`).then(function(response) {\n      this.setState({\n        movieList: response.data.results.slice(1,6),\n        currentMovie: response.data.results[0]\n      }, function() {\n        this.applyVideoToCurrentMovie();\n      });\n    }.bind(this));\n  }\n\n  applyVideoToCurrentMovie(){\n   axios.get(`${API_END_POINT}movie/${this.state.currentMovie.id}?${API_KEY}&append_to_response=videos`).then(function(response) {\n       const youtubeKey = response.data.videos.results[0];\n       let newCurrentMovieState = this.state.currentMovie;\n       newCurrentMovieState.videoId = youtubeKey;\n       this.setState({\n         currentMovie : newCurrentMovieState\n        });\n        console.log(this.state.currentMovie);\n   }.bind(this));\n  }\n\n  changeVideoHandler(movie) {\n    this.setState({currentMovie: movie}, function() {\n      this.applyVideoToCurrentMovie();\n      this.setRecommendation();\n    })\n  }\n\n  searchVideoHandler(searchText) {\n    if(searchText) {\n      axios.get(`${API_END_POINT}${SEARCH_URL}&${API_KEY}&query=${searchText}`).then(function(response) {\n        if(response.data && response.data.results[0]) {\n          if(response.data.results[0].id !== this.state.currentMovie.id) {\n            this.setState({\n              currentMovie: response.data.results[0]\n            }, () => {\n              this.applyVideoToCurrentMovie();\n              this.setRecommendation();\n            })\n          }\n        }\n      }.bind(this));\n    }\n  }\n\n  setRecommendation(){\n    axios.get(`${API_END_POINT}movie/${this.state.currentMovie.id}/recommendations?${API_KEY}&language=fr`).then(function(response){\n      this.setState({\n        movieList: response.data.results.slice(0,5)\n      });\n    }.bind(this));\n  }\n\n\n\n  render () {\n    const renderVideoList = () => {\n      if (this.state.movieList.length >= 5) {\n        return <VideoList movieList={this.state.movieList} changedVideo={this.changeVideoHandler.bind(this)}/>\n      }\n    }\n\n    return (\n      <div>\n        <h1>NETFLIX REACT</h1>\n        <div className=\"search_bar\">\n          <SearchBar searchedVideo={this.searchVideoHandler.bind(this)}/>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-md-8\">\n            <Video videoId={this.state.currentMovie.videoId}/>\n            <Navbar currentMovie={this.state.currentMovie} />\n          </div>\n          <div className=\"col-md-4\">\n            {renderVideoList()}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}